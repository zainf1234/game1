(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1848:(e,t,i)=>{Promise.resolve().then(i.bind(i,3792))},3792:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>h});var l=i(5155),n=i(2115);let s=[{id:1,name:"Level 1",width:800,height:400,platforms:[{x:0,y:380,width:800,height:20},{x:300,y:320,width:100,height:10}],coins:[{x:200,y:300},{x:350,y:250},{x:700,y:300}],enemies:[{x:450,y:350}]},{id:2,name:"Level 2",width:1e3,height:400,platforms:[{x:0,y:380,width:1e3,height:20},{x:450,y:320,width:120,height:10},{x:750,y:280,width:100,height:10}],coins:[{x:150,y:300},{x:500,y:300},{x:800,y:300}],enemies:[{x:600,y:350},{x:900,y:350}]}];function h(){let[e,t]=(0,n.useState)("level-select"),[i,h]=(0,n.useState)([1]),[r,d]=(0,n.useState)(null),[a,y]=(0,n.useState)({x:50,y:0}),[c,x]=(0,n.useState)({x:0,y:0}),[o,u]=(0,n.useState)(!1),[m,v]=(0,n.useState)(3),[w,g]=(0,n.useState)([]),[f,p]=(0,n.useState)([]),j=(0,n.useRef)({}),k=s.find(e=>e.id===r)||null;return((0,n.useEffect)(()=>{"playing"===e&&k&&(y({x:50,y:0}),x({x:0,y:0}),v(3),g([]),p(k.enemies.map(e=>({...e,alive:!0}))),u(!1))},[e,k]),(0,n.useEffect)(()=>{let e=e=>{j.current[e.key]=!0,["ArrowLeft","ArrowRight"," ","ArrowUp"].includes(e.key)&&e.preventDefault()},t=e=>{j.current[e.key]=!1};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,n.useEffect)(()=>{let i;if(!k||"playing"!==e)return;let l=()=>{x(e=>{let t=0,i=e.y+.8;return j.current.ArrowLeft?t=-6:j.current.ArrowRight&&(t=6),(j.current[" "]||j.current.ArrowUp)&&o&&(i=-15,u(!1)),{x:t,y:i}}),y(e=>{let t=e.x+c.x,i=e.y+c.y;t<0&&(t=0),k&&t>k.width-30&&(t=k.width-30);let l=!1,n=!1;for(let s of k.platforms)t+30>s.x&&t<s.x+s.width&&(e.y+30<=s.y&&i+30>=s.y&&c.y>=0?(i=s.y-30,l=!0,n=!1):e.y>=s.y+s.height&&i<=s.y+s.height&&c.y<0&&(i=s.y+s.height+.5,n=!0));return k&&i>k.height-30&&(i=k.height-30,l=!0,n=!1),n&&x(e=>({...e,y:0})),u(l),{x:t,y:i}}),k&&k.coins.forEach((e,t)=>{!w.includes(t)&&a.x+30>e.x&&a.x<e.x+20&&a.y+30>e.y&&a.y<e.y+20&&g(e=>[...e,t])}),f.forEach((e,i)=>{if(!e.alive)return;let l={x:e.x,y:e.y,width:30,height:30},n={x:a.x,y:a.y,width:30,height:30};n.x<l.x+l.width&&n.x+n.width>l.x&&n.y<l.y+l.height&&n.y+n.height>l.y&&(c.y>0&&a.y+30<=e.y+10?(p(e=>e.map((e,t)=>t===i?{...e,alive:!1}:e)),x(e=>({...e,y:-7.5}))):(v(e=>{let i=e-1;return i<=0&&t("game-over"),i}),y({x:50,y:0}),x({x:0,y:0})))}),k&&w.length===k.coins.length&&f.every(e=>!e.alive)&&(h(e=>!e.includes(k.id+1)&&s.some(e=>e.id===k.id+1)?[...e,k.id+1]:e),d(null),t("level-select")),i=requestAnimationFrame(l)};return i=requestAnimationFrame(l),()=>cancelAnimationFrame(i)},[a,c,w,f,o,k,e]),"level-select"===e)?(0,l.jsxs)("main",{className:"level-select",children:[(0,l.jsx)("h1",{children:"Circle Platformer â€” Select Level"}),(0,l.jsx)("ul",{children:s.map(e=>(0,l.jsx)("li",{children:(0,l.jsxs)("button",{disabled:!i.includes(e.id),onClick:()=>{d(e.id),t("playing")},children:[e.name," ",i.includes(e.id)?"":"(Locked)"]})},e.id))})]}):"game-over"===e?(0,l.jsxs)("main",{className:"game-over",children:[(0,l.jsx)("h1",{children:"Game Over"}),(0,l.jsx)("button",{onClick:()=>{k?(v(3),y({x:50,y:0}),x({x:0,y:0}),g([]),p(k.enemies.map(e=>({...e,alive:!0}))),u(!1),t("playing")):t("level-select")},children:"Restart Level"}),(0,l.jsx)("button",{onClick:()=>{t("level-select"),d(null)},children:"Back to Level Select"})]}):(0,l.jsxs)("main",{className:"game-screen",style:{width:null==k?void 0:k.width,height:null==k?void 0:k.height},children:[(0,l.jsxs)("div",{className:"hud",children:[(0,l.jsxs)("div",{children:["Lives: ",m]}),(0,l.jsxs)("div",{children:["Coins: ",w.length," / ",null==k?void 0:k.coins.length]})]}),(0,l.jsxs)("div",{className:"game-area",style:{width:null==k?void 0:k.width,height:null==k?void 0:k.height},children:[null==k?void 0:k.platforms.map((e,t)=>(0,l.jsx)("div",{className:"platform",style:{left:e.x,top:e.y,width:e.width,height:e.height}},t)),null==k?void 0:k.coins.map((e,t)=>w.includes(t)?null:(0,l.jsx)("div",{className:"coin",style:{left:e.x,top:e.y,width:20,height:20}},t)),f.map((e,t)=>e.alive&&(0,l.jsx)("div",{className:"enemy",style:{left:e.x,top:e.y,width:30,height:30}},t)),(0,l.jsx)("div",{className:"player",style:{left:a.x,top:a.y,width:30,height:30}})]})]})}}},e=>{e.O(0,[441,964,358],()=>e(e.s=1848)),_N_E=e.O()}]);